<!DOCTYPE html>
<html>
  <head>
    <title>Simple registration form</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="styles/form.css">
  </head>
  <body>
    <div class="main-block">
      <button onClick="window.location='index.html';">Back to Homepage</button>
      <h1><b>Registration</b></h1>
      <form action="/">
        <hr>
        
        <label id="icon" for="email"><i class="fas fa-envelope"></i></label>
        <input type="text" name="email" id="email" placeholder="Email" required/>
        <label id="icon" for="name"><i class="fas fa-user"></i></label>
        <input type="text" name="name" id="name" placeholder="Name" required/>
        <label id="icon" for="password"><i class="fas fa-unlock-alt"></i></label>
        <input type="password" name="password" id="password" placeholder="Password" required/>
        <hr>
        <!-- <div class="account-type">
            <input type="radio" value="seller" id="radioOne" name="account" />
            <label for="radioOne" class="radio">Buyer</label>
            <input type="radio" value="buyer" id="radioTwo" name="account" />
            <label for="radioTwo" class="radio">Seller</label>
            <input type="radio" value="both" id="radioThree" name="account" checked/>
            <label for="radioThree" class="radio">Both</label>
        </div> -->
        <hr>
        <div class="btn-block">
          <p>By clicking Register, you agree to our <a href="https://www.w3docs.com/privacy-policy">Privacy Policy</a>.</p>
          <button type="button" onclick="javascript:execute()">Register</button>
          <p id="id_register"></p>
        </div>
      </form>
    </div>

    <script>

      function execute(){
        var data = null;
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
        var name = document.getElementById("name").value;
        data = email + "&" + name + "&" + password;
        console.log(data);

        var xhr = new XMLHttpRequest();
        var URL = "https://bc73690a6fe9.ngrok.io/ok2";
        
        xhr.open("POST", URL, true);
        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xhr.addEventListener("readystatechange", function () {
          if (this.readyState === this.DONE) {

              document.getElementById("id_register").innerHTML = "Registration Successful";
              window.alert("User Registration Succesfull");
              window.open('index.html');
            
          }
        });
        xhr.send(data);
      }
    </script>
  </body>
</html>